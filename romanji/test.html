<html>
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
        <script>
        var dict = {"あ":"a", "い":"i", "う":"u", "え":"e", "お":"o",
                    "か":"ka", "き":"ki", "く":"ku", "け":"ke", "こ":"ko",
                    "さ":"sa", "し":"shi", "す":"su", "せ":"se", "そ":"so",
                    "た":"ta", "ち":"chi", "つ":"tsu", "て":"te", "と":"to",
                    "な":"na", "に":"ni", "ぬ":"nu", "ね":"ne", "の":"no",
                    "は":"ha", "ひ":"hi", "ふ":"hu", "へ":"he", "ほ":"ho",
                    "ま":"ma", "み":"mi", "む":"mu", "め":"me", "も":"mo",
                    "や":"ya", "ゆ":"yu", "よ":"yo",
                    "ら":"ra", "り":"ri", "る":"ru", "れ":"re", "ろ":"ro",
                    "わ":"wa", "を":"wo", "ん":"n",
                    "が":"ga", "ぎ":"gi", "ぐ":"gu", "げ":"ge", "ご":"go",
                    "ざ":"za", "じ":"ji", "ず":"zu", "ぜ":"ze", "ぞ":"zo",
                    "だ":"da", "ぢ":"ji", "づ":"zu", "で":"de", "ど":"do",
                    "ば":"ba", "び":"bi", "ぶ":"bu", "べ":"be", "ぼ":"bo",
                    "ぱ":"pa", "ぴ":"pi", "ぷ":"pu", "ぺ":"pe", "ぽ":"po"};

        function romanjify(kana)
        {
            // Transliterate characters
            var romanji = "";
            for(var i = 0 ; i < kana.length ; i++)
            {
                document.write("<br>\nCurrent character: " + kana[i]);
                if(dict[kana[i]])
                {
                    romanji += dict[kana[i]];
                }
                else
                {
                    romanji += kana[i];
                }
            }

            // Handle small tsu
            for (var i = 0 ; i < romanji.length-1 ; i++)
            {
                if(romanji[i] == "っ")
                {
                   romanji = romanji.substr(0, i) + romanji[i+1] + romanji.substr(i+1);
                }
                if(romanji[i] == "ゃ")
                {
                   romanji = romanji.substr(0, i-1) + "a" + romanji.substr(i+1);
                   i--; // The length of romanji decreases by 1, so we account for that
                }
                if(romanji[i] == "ゅ")
                {
                   romanji = romanji.substr(0, i-1) + "u" + romanji.substr(i+1);
                   i--;
                }
                if(romanji[i] == "ょ")
                {
                   romanji = romanji.substr(0, i-1) + "o" + romanji.substr(i+1);
                   i--;
                }
            }

            return romanji;
        }

        var japanese = "いっしゅかん";
        alert("Romanjifyied! :  " + romanjify(japanese));
        </script>
    </body>
</html>
